DROP DATABASE IF EXISTS ECOMMERCE;
CREATE DATABASE ECOMMERCE;
USE ECOMMERCE;

CREATE TABLE CLIENTS(
    ID_CLIENT INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    FULLNAME TEXT NOT NULL,
    EMAIL TEXT NOT NULL,
    PASSWORD TEXT NOT NULL,
    ADDRESS TEXT NOT NULL,
    CITY TEXT NOT NULL,
    STATE TEXT NOT NULL,
    ZIPCODE TEXT NOT NULL,
    COUNTRY TEXT NOT NULL,
    PHONE TEXT NOT NULL
);

CREATE TABLE ROL(
    ID_ROL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ROL_NAME TEXT NOT NULL
);

CREATE TABLE PERSONAL(
    ID_PERSONAL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    FULLNAME TEXT NOT NULL,
    EMAIL TEXT NOT NULL,
    PASSWORD TEXT NOT NULL,
    ID_ROL INT NOT NULL,
    ID_STORE INT NOT NULL,
    FOREIGN KEY (ID_ROL) REFERENCES ROL(ID_ROL),
    FOREIGN KEY (ID_STORE) REFERENCES SUCURSAL(ID_STORE)
);

CREATE TABLE PRODUCTS(
    ID_PRODUCT INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NAME TEXT NOT NULL,
    DESCRIPTION TEXT NOT NULL,
    PRICE INT NOT NULL,
    STOCK INT NOT NULL,
    ID_STORE INT NOT NULL,
    FOREIGN KEY (ID_STORE) REFERENCES SUCURSAL(ID_STORE)
);

CREATE TABLE PROVIDERS(
    ID_PROVIDER INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    FULLNAME TEXT NOT NULL,
    EMAIL TEXT NOT NULL,
    /* ADDRESS TEXT NOT NULL,
    CITY TEXT NOT NULL,
    STATE TEXT NOT NULL,
    ZIPCODE TEXT NOT NULL,
    COUNTRY TEXT NOT NULL, */
    PHONE TEXT NOT NULL
);

CREATE TABLE STORES(
    ID_STORE INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NAME TEXT NOT NULL,
    ADDRESS TEXT NOT NULL,
    CITY TEXT NOT NULL,
    STATE TEXT NOT NULL,
    ZIPCODE TEXT NOT NULL,
    COUNTRY TEXT NOT NULL,
    PHONE TEXT NOT NULL
);

CREATE TABLE ORDERS(
    ID_ORDER INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_CLIENT INT NOT NULL,
    ID_STORE INT NOT NULL,
    FOREIGN KEY (ID_CLIENT) REFERENCES CLIENTES(ID_CLIENTE),
    FOREIGN KEY (ID_STORE) REFERENCES SUCURSAL(ID_STORE)
);

CREATE TABLE ORDER_DETAILS(
    ID_ORDER_DETAIL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_ORDER INT NOT NULL,
    ID_PRODUCT INT NOT NULL,
    QUANTITY INT NOT NULL,
    FOREIGN KEY (ID_ORDER) REFERENCES ORDERS(ID_ORDER),
    FOREIGN KEY (ID_PRODUCT) REFERENCES PRODUCTS(ID_PRODUCT)
);

CREATE TABLE PURCHASES(
    ID_PURCHASE INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_PROVIDER INT NOT NULL,
    ID_STORE INT NOT NULL,
    FOREIGN KEY (ID_PROVIDER) REFERENCES PROVIDERS(ID_PROVIDER),
    FOREIGN KEY (ID_STORE) REFERENCES SUCURSAL(ID_STORE)
);

CREATE TABLE PURCHASE_DETAILS(
    ID_PURCHASE_DETAIL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_PURCHASE INT NOT NULL,
    ID_PRODUCT INT NOT NULL,
    QUANTITY INT NOT NULL,
    FOREIGN KEY (ID_PURCHASE) REFERENCES PURCHASES(ID_PURCHASE),
    FOREIGN KEY (ID_PRODUCT) REFERENCES PRODUCTS(ID_PRODUCT)
);

CREATE TABLE INVENTORIES(
    ID_INVENTORY INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_PRODUCT INT NOT NULL,
    ID_STORE INT NOT NULL,
    QUANTITY INT NOT NULL,
    FOREIGN KEY (ID_PRODUCT) REFERENCES PRODUCTS(ID_PRODUCT),
    FOREIGN KEY (ID_STORE) REFERENCES SUCURSAL(ID_STORE)
);

CREATE TABLE INVENTORY_DETAILS(
    ID_INVENTORY_DETAIL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_INVENTORY INT NOT NULL,
    ID_PRODUCT INT NOT NULL,
    QUANTITY INT NOT NULL,
    FOREIGN KEY (ID_INVENTORY) REFERENCES INVENTORIES(ID_INVENTORY),
    FOREIGN KEY (ID_PRODUCT) REFERENCES PRODUCTS(ID_PRODUCT)
);

CREATE TABLE SALES(
    ID_SALE INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_PERSONAL INT NOT NULL,
    ID_STORE INT NOT NULL,
    FOREIGN KEY (ID_PERSONAL) REFERENCES PERSONAL(ID_PERSONAL),
    FOREIGN KEY (ID_STORE) REFERENCES SUCURSAL(ID_STORE)
);

CREATE TABLE SALE_DETAILS(
    ID_SALE_DETAIL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_SALE INT NOT NULL,
    ID_PRODUCT INT NOT NULL,
    QUANTITY INT NOT NULL,
    FOREIGN KEY (ID_SALE) REFERENCES SALES(ID_SALE),
    FOREIGN KEY (ID_PRODUCT) REFERENCES PRODUCTS(ID_PRODUCT)
);

CREATE TABLE PAYMENTS(
    ID_PAYMENT INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_ORDER INT NOT NULL,
    ID_PERSONAL INT NOT NULL,
    FOREIGN KEY (ID_ORDER) REFERENCES ORDERS(ID_ORDER),
    FOREIGN KEY (ID_PERSONAL) REFERENCES PERSONAL(ID_PERSONAL)
);

CREATE TABLE PAYMENT_DETAILS(
    ID_PAYMENT_DETAIL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_PAYMENT INT NOT NULL,
    ID_SALE INT NOT NULL,
    FOREIGN KEY (ID_PAYMENT) REFERENCES PAYMENTS(ID_PAYMENT),
    FOREIGN KEY (ID_SALE) REFERENCES SALES(ID_SALE)
);

CREATE TABLE RETURNS(
    ID_RETURN INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_ORDER INT NOT NULL,
    ID_PERSONAL INT NOT NULL,
    FOREIGN KEY (ID_ORDER) REFERENCES ORDERS(ID_ORDER),
    FOREIGN KEY (ID_PERSONAL) REFERENCES PERSONAL(ID_PERSONAL)
);

CREATE TABLE RETURN_DETAILS(
    ID_RETURN_DETAIL INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_RETURN INT NOT NULL,
    ID_SALE INT NOT NULL,
    FOREIGN KEY (ID_RETURN) REFERENCES RETURNS(ID_RETURN),
    FOREIGN KEY (ID_SALE) REFERENCES SALES(ID_SALE)
);

CREATE TABLE CATEGORIES(
    ID_CATEGORY INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NAME TEXT NOT NULL
);

/* INSERTS OF CLIENTS */
INSERT INTO CLIENTS(FULLNAME, EMAIL, PASSWORD, ADDRESS, CITY, STATE, ZIPCODE, COUNTRY, PHONE) VALUES('Juan Perez', 'jperez@mail.com', '1234', 'Calle 1', 'Ciudad de Mexico', 'CDMX', '12345', 'Mexico', '1234567890');
INSERT INTO CLIENTS(FULLNAME, EMAIL, PASSWORD, ADDRESS, CITY, STATE, ZIPCODE, COUNTRY, PHONE) VALUES('Maria Lopez', 'mlopez@mail.com', '1234', 'Calle 2', 'Ciudad de Mexico', 'CDMX', '12345', 'Mexico', '1234567890');
INSERT INTO CLIENTS(FULLNAME, EMAIL, PASSWORD, ADDRESS, CITY, STATE, ZIPCODE, COUNTRY, PHONE) VALUES('Pedro Sanchez', 'psanchez@mail.com', '1234', 'Calle 3', 'Ciudad de Mexico', 'CDMX', '12345', 'Mexico', '1234567890');
INSERT INTO CLIENTS(FULLNAME, EMAIL, PASSWORD, ADDRESS, CITY, STATE, ZIPCODE, COUNTRY, PHONE) VALUES('Luisa Garcia', 'lgarcia@mail.com', '1234', 'Calle 4', 'Ciudad de Mexico', 'CDMX', '12345', 'Mexico', '1234567890');

/* INSERTS OF ROL */
INSERT INTO ROL(ROL_NAME) VALUES('ADMIN');
INSERT INTO ROL(ROL_NAME) VALUES('USER');

/* INSERTS OF PERSONAL */
INSERT INTO PERSONAL(FULLNAME, EMAIL, PASSWORD, ID_ROL, ID_STORE) VALUES('Juan Perez', 'jstoreperez@store.com', '1234', 1, 1);
INSERT INTO PERSONAL(FULLNAME, EMAIL, PASSWORD, ID_ROL, ID_STORE) VALUES('Maria Lopez', 'mstorelopez@store.com', '1234', 1, 1);
INSERT INTO PERSONAL(FULLNAME, EMAIL, PASSWORD, ID_ROL, ID_STORE) VALUES('Pedro Sanchez', 'pstoresanchez@store.com', '1234', 1, 1);
INSERT INTO PERSONAL(FULLNAME, EMAIL, PASSWORD, ID_ROL, ID_STORE) VALUES('Luisa Garcia', 'lstoregarcia@store.com', '1234', 1, 1);

/* INSERTS OF PRODUCTS */
INSERT INTO PRODUCTS(NAME, DESCRIPTION, PRICE, STOCK, ID_STORE) VALUES('Producto 1', 'Descripcion 1', 100, 10, 1);
INSERT INTO PRODUCTS(NAME, DESCRIPTION, PRICE, STOCK, ID_STORE) VALUES('Producto 2', 'Descripcion 2', 200, 20, 1);
INSERT INTO PRODUCTS(NAME, DESCRIPTION, PRICE, STOCK, ID_STORE) VALUES('Producto 3', 'Descripcion 3', 300, 30, 1);
INSERT INTO PRODUCTS(NAME, DESCRIPTION, PRICE, STOCK, ID_STORE) VALUES('Producto 4', 'Descripcion 4', 400, 40, 1);

/* INSERTS OF PROVIDERS */
INSERT INTO PROVIDERS(FULLNAME, EMAIL, PHONE) VALUES('Proveedor 1', 'proveider1@mail.com', '1234567890');
INSERT INTO PROVIDERS(FULLNAME, EMAIL, PHONE) VALUES('Proveedor 2', 'proveider2@mail.com', '1234567890');
INSERT INTO PROVIDERS(FULLNAME, EMAIL, PHONE) VALUES('Proveedor 3', 'proveider3@mail.com', '1234567890');
INSERT INTO PROVIDERS(FULLNAME, EMAIL, PHONE) VALUES('Proveedor 4', 'proveider4@mail.com', '1234567890');

/* INSERTS OF STORE */
INSERT INTO STORES(NAME, ADDRESS, CITY, STATE, ZIPCODE, COUNTRY, PHONE) VALUES('Tienda 1', 'Calle 1', 'Ciudad de Mexico', 'CDMX', '12345', 'Mexico', '1234567890');
INSERT INTO STORES(NAME, ADDRESS, CITY, STATE, ZIPCODE, COUNTRY, PHONE) VALUES('Tienda 2', 'Calle 2', 'Ciudad de Mexico', 'CDMX', '12345', 'Mexico', '1234567890');
INSERT INTO STORES(NAME, ADDRESS, CITY, STATE, ZIPCODE, COUNTRY, PHONE) VALUES('Tienda 3', 'Calle 3', 'Ciudad de Mexico', 'CDMX', '12345', 'Mexico', '1234567890');
INSERT INTO STORES(NAME, ADDRESS, CITY, STATE, ZIPCODE, COUNTRY, PHONE) VALUES('Tienda 4', 'Calle 4', 'Ciudad de Mexico', 'CDMX', '12345', 'Mexico', '1234567890');

/* INSERTS OF ORDERS */
INSERT INTO ORDERS(ID_CLIENT, ID_PERSONAL, ID_STORE) VALUES(1, 1, 1);
INSERT INTO ORDERS(ID_CLIENT, ID_PERSONAL, ID_STORE) VALUES(2, 2, 1);
INSERT INTO ORDERS(ID_CLIENT, ID_PERSONAL, ID_STORE) VALUES(3, 3, 1);
INSERT INTO ORDERS(ID_CLIENT, ID_PERSONAL, ID_STORE) VALUES(4, 4, 1);

/* INSERTS OF ORDER_DETAIL */
INSERT INTO ORDER_DETAILS(ID_ORDER, ID_PRODUCT, QUANTITY) VALUES(1, 1, 1);
INSERT INTO ORDER_DETAILS(ID_ORDER, ID_PRODUCT, QUANTITY) VALUES(2, 2, 2);
INSERT INTO ORDER_DETAILS(ID_ORDER, ID_PRODUCT, QUANTITY) VALUES(3, 3, 3);
INSERT INTO ORDER_DETAILS(ID_ORDER, ID_PRODUCT, QUANTITY) VALUES(4, 4, 4);

/* INSERTS OF PURCHASES */
INSERT INTO PURCHASES(ID_PROVIDER, ID_PERSONAL, ID_STORE) VALUES(1, 1, 1);
INSERT INTO PURCHASES(ID_PROVIDER, ID_PERSONAL, ID_STORE) VALUES(2, 2, 1);
INSERT INTO PURCHASES(ID_PROVIDER, ID_PERSONAL, ID_STORE) VALUES(3, 3, 1);
INSERT INTO PURCHASES(ID_PROVIDER, ID_PERSONAL, ID_STORE) VALUES(4, 4, 1);

/* INSERTS OF PURCHASE_DETAIL */
INSERT INTO PURCHASE_DETAILS(ID_PURCHASE, ID_PRODUCT, QUANTITY) VALUES(1, 1, 1);
INSERT INTO PURCHASE_DETAILS(ID_PURCHASE, ID_PRODUCT, QUANTITY) VALUES(2, 2, 2);
INSERT INTO PURCHASE_DETAILS(ID_PURCHASE, ID_PRODUCT, QUANTITY) VALUES(3, 3, 3);
INSERT INTO PURCHASE_DETAILS(ID_PURCHASE, ID_PRODUCT, QUANTITY) VALUES(4, 4, 4);

/* INSERTS OF SALES */
INSERT INTO SALES(ID_PERSONAL, ID_STORE) VALUES(1, 1);
INSERT INTO SALES(ID_PERSONAL, ID_STORE) VALUES(2, 1);
INSERT INTO SALES(ID_PERSONAL, ID_STORE) VALUES(3, 1);
INSERT INTO SALES(ID_PERSONAL, ID_STORE) VALUES(4, 1);

/* INSERTS OF SALE_DETAIL */
INSERT INTO SALE_DETAILS(ID_SALE, ID_PRODUCT, QUANTITY) VALUES(1, 1, 1);
INSERT INTO SALE_DETAILS(ID_SALE, ID_PRODUCT, QUANTITY) VALUES(2, 2, 2);
INSERT INTO SALE_DETAILS(ID_SALE, ID_PRODUCT, QUANTITY) VALUES(3, 3, 3);
INSERT INTO SALE_DETAILS(ID_SALE, ID_PRODUCT, QUANTITY) VALUES(4, 4, 4);


/* INSERTS OF INVENTORIES */
INSERT INTO INVENTORIES(ID_PRODUCT, ID_STORE, QUANTITY) VALUES(1, 1, 1);
INSERT INTO INVENTORIES(ID_PRODUCT, ID_STORE, QUANTITY) VALUES(2, 1, 2);
INSERT INTO INVENTORIES(ID_PRODUCT, ID_STORE, QUANTITY) VALUES(3, 1, 3);
INSERT INTO INVENTORIES(ID_PRODUCT, ID_STORE, QUANTITY) VALUES(4, 1, 4);

/* INSERTS OF INVENTORIES_DETAIL */
INSERT INTO INVENTORY_DETAIL(ID_INVENTORY, ID_SUPPLY, QUANTITY) VALUES(1, 1, 1);
INSERT INTO INVENTORY_DETAIL(ID_INVENTORY, ID_SUPPLY, QUANTITY) VALUES(2, 2, 2);
INSERT INTO INVENTORY_DETAIL(ID_INVENTORY, ID_SUPPLY, QUANTITY) VALUES(3, 3, 3);
INSERT INTO INVENTORY_DETAIL(ID_INVENTORY, ID_SUPPLY, QUANTITY) VALUES(4, 4, 4);

